<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>دی ان اس اختصاصی</title>
  <!-- اسکریپت جلوگیری از ابزارهای توسعه (همانند نسخه قبلی) -->
  <script src="https://fastly.jsdelivr.net/npm/disable-devtool/disable-devtool.min.js" disable-devtool-auto
    disable-menu="true" url="https://cia.gov"></script>
  <style>
    /* متغیرهای CSS برای ظاهر مدرن (شباهت به Windows 12) */
    :root {
      --primary-bg: #f3f4f6;
      --card-bg: #ffffff;
      --accent-color: #0078d7;
      --text-color: #333;
      --border-color: #e1e1e1;
      --transition-duration: 0.5s;
      --border-radius: 8px;
    }

    /* تنظیمات اولیه */
    * {
      box-sizing: border-box;
    }
    body {
      background: var(--primary-bg);
      font-family: "Segoe UI", Tahoma, sans-serif;
      margin: 0;
      padding: 0;
      color: var(--text-color);
    }

    /* انیمیشن‌های تغییر شفافیت و اندازه (fade) */
    .fade-out {
      animation: fadeOut var(--transition-duration) forwards;
    }
    .fade-in {
      animation: fadeIn var(--transition-duration) forwards;
    }
    @keyframes fadeOut {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(0.95); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    /* استایل کارت (مستطیل‌های مدرن) */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 20px auto;
      max-width: 400px;
    }

    /* فرم ورود و احراز هویت */
    .login-container {
      max-width: 400px;
      margin: 50px auto;
      text-align: center;
    }
    .login-container h2 {
      margin-bottom: 20px;
    }
    .login-container input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      outline: none;
    }

    /* دکمه‌های مدرن */
    button,
    input[type="button"],
    input[type="submit"] {
      font-family: "Segoe UI", Tahoma, sans-serif;
      font-size: 14px;
      background-color: var(--accent-color);
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 10px 20px;
      margin: 10px 5px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
    }
    button:hover,
    input[type="button"]:hover,
    input[type="submit"]:hover {
      background-color: #005a9e;
    }
    button:active,
    input[type="button"]:active,
    input[type="submit"]:active {
      transform: translateY(2px);
    }

    /* استایل هدر صفحه اصلی */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--card-bg);
      padding: 10px 20px;
      border-bottom: 1px solid var(--border-color);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    header a {
      text-decoration: none;
    }
    /* دکمه تغییر ظاهر */
    .new-appearance-btn {
      background-color: var(--accent-color);
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 10px 20px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
    }
    .new-appearance-btn:hover {
      background-color: #005a9e;
    }
    .new-appearance-btn:active {
      transform: translateY(2px);
    }

    /* استایل لینک خرید اشتراک به شکل دکمه */
    .win98-button {
      display: inline-block;
      font-family: "Segoe UI", Tahoma, sans-serif;
      font-size: 14px;
      background-color: var(--accent-color);
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 10px 20px;
      text-decoration: none;
      margin-top: 20px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
    }
    .win98-button:hover {
      background-color: #005a9e;
    }
    .win98-button:active {
      transform: translateY(2px);
    }

    /* صفحه اصلی (رابط کاربری) */
    #main-page {
      max-width: 900px;
      margin: 20px auto;
      padding: 10px;
      /* با انیمیشن fade-in نمایش داده می‌شود */
    }

    /* استایل بخش‌های مختلف */
    .section {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 20px;
      margin-bottom: 20px;
      text-align: right;
    }
    .section h2 {
      margin-top: 0;
      margin-bottom: 15px;
    }
    .section select,
    .section input,
    .section textarea {
      display: block;
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      outline: none;
    }
    .section textarea {
      resize: none;
    }
    .loading {
      display: none;
      padding: 10px;
      background: #e9ecef;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      margin-bottom: 10px;
      text-align: center;
    }
    .toast {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: #ffffe0;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      padding: 10px 20px;
      display: none;
      z-index: 1000;
    }
    .history-list {
      list-style: none;
      padding: 0;
      margin: 10px 0 0 0;
      max-height: 100px;
      overflow-y: auto;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 4px;
    }
    .progress-container {
      width: 100%;
      background: #e9ecef;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      height: 20px;
      margin: 10px 0;
    }
    .progress-bar {
      height: 100%;
      background: var(--accent-color);
      width: 0%;
      border-radius: 4px;
      transition: width 0.3s;
    }
    /* خروجی به صورت LTR */
    .ltr-output {
      direction: ltr;
      text-align: left;
    }

    /* ریسپانسیو */
    @media screen and (max-width: 800px) {
      #main-page,
      .login-container {
        width: 95%;
        margin: 10px auto;
      }
    }

    #ipv6-clear-history,#ipv4-clear-history {
      background: rgb(231, 9, 9);
    }

    #ipv6-clear-history,#ipv4-clear-history:hover {
      background: rgb(182, 0, 0);
    }
  </style>
</head>
<body>
  <!-- فرم ورود اصلی -->
  <div id="login-page" class="login-container card">
    <h2>ورود به سیستم</h2>
    <form id="login-form">
      <input type="text" id="username" placeholder="نام کاربری" required>
      <input type="password" id="password" placeholder="رمز عبور" required>
      <input type="text" id="userId" placeholder="شناسه شما" required>
      <button type="submit">ورود</button>
      <div class="clear"></div>
    </form>
    <div id="login-loading" class="loading">در حال بارگذاری...</div>
    <div id="login-error" style="color:red; display:none;">اعتبارسنجی ناموفق</div>
    <!-- لینک خرید اشتراک -->
    <a href="new-sub.html" target="_blank" class="win98-button">خرید اشتراک سایت</a>
  </div>

  <!-- فرم احراز هویت مجدد -->
  <div id="reauth-page" class="login-container card" style="display:none;">
    <h2>احراز هویت مجدد</h2>
    <form id="reauth-form">
      <input type="text" id="reauth-userId" placeholder="شناسه شما" required>
      <input type="text" id="reauth-captcha-input" placeholder="کد امنیتی" required>
      <div id="reauth-captcha-container" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin: 10px 0;">
        <span id="reauth-captcha-display" style="font-weight: bold; font-size: 16px; letter-spacing: 2px;"></span>
        <button type="button" id="reauth-refresh-captcha">تغییر کد</button>
      </div>
      <button type="submit">تایید</button>
      <div class="clear"></div>
    </form>
    <div id="reauth-error" style="color:red; display:none;">احراز هویت ناموفق</div>
  </div>

  <!-- صفحه اصلی (رابط کاربری مدرن به سبک Windows 12) -->
  <div id="main-page" style="display: none;">
    <header>
      <button class="new-appearance-btn" id="new-appearance-btn">ظاهر جدید</button>
      <a href="new-video.html" target="_blank">
        <button>ویدیو آموزشی</button>
      </a>
    </header>
    <!-- بخش تولید IPv4 -->
    <div id="ipv4-section" class="section">
      <h2>تولید IPv4</h2>
      <select id="ipv4-location-select">
        <option value="">انتخاب لوکیشن</option>
        <option value="Location1">Location1</option>
        <option value="Location2">Location2</option>
        <option value="Location3">Location3</option>
        <option value="سرور گیمینگ">Gaming server1</option>
      </select>
      <input type="number" id="ipv4-count" placeholder="تعداد 1 تا 5" min="1" max="5">
      <textarea id="ipv4-result" rows="4" class="ltr-output" readonly></textarea>
      <div class="loading">در حال پردازش...</div>
      <button id="ipv4-generate">تولید</button>
      <button id="ipv4-copy">کپی</button>
      <button id="ipv4-clear-history">پاک کردن تاریخچه</button>
      <button id="ipv4-download-history">دانلود تاریخچه</button>
      <ul id="ipv4-history" class="history-list"></ul>
    </div>

    <!-- بخش تولید IPv6 -->
    <div id="ipv6-section" class="section">
      <h2>تولید IPv6</h2>
      <select id="ipv6-location-select">
        <option value="">انتخاب لوکیشن</option>
        <option value="Location1">Location1</option>
        <option value="Location2">Location2</option>
        <option value="Location3">Location3</option>
        <option value="سرور گیمینگ">Gaming server1</option>
      </select>
      <input type="number" id="ipv6-count" placeholder="تعداد 1 تا 5" min="1" max="5">
      <textarea id="ipv6-result" rows="4" class="ltr-output" readonly></textarea>
      <div class="loading">در حال پردازش...</div>
      <button id="ipv6-generate">تولید</button>
      <button id="ipv6-copy">کپی</button>
      <button id="ipv6-clear-history">پاک کردن تاریخچه</button>
      <button id="ipv6-download-history">دانلود تاریخچه</button>
      <ul id="ipv6-history" class="history-list"></ul>
    </div>

    <!-- بخش تشخیص کشور IP -->
    <div id="ip-country-section" class="section">
      <h2>تشخیص کشور IP</h2>
      <input type="text" id="ip-country-input" placeholder="آدرس IP">
      <div class="loading">در حال پردازش...</div>
      <div class="progress-container">
        <div class="progress-bar"></div>
      </div>
      <button id="ip-country-lookup">جستجو</button>
      <button id="ip-country-copy">کپی</button>
      <textarea id="ip-country-result" rows="4" readonly></textarea>
    </div>

    <!-- بخش دانلود کانفیگ وایرگارد -->
    <div id="wg-config-section" class="section">
      <h2>دانلود کانفیگ وایرگارد</h2>
      <select id="wg-config-select">
        <option value="">انتخاب کانفیگ</option>
        <option value="config1" data-link="https://e.pcloud.link/publink/show?code=XZdlOKZhOL6sKBcXbVKyNyhWtvi9uJV8txy"
          data-name="کانفیگ شماره 1" data-location="سرور 1-آلمان 1" data-status="active">کانفیگ 1</option>
        <option value="config2" data-link="https://example.com/config2.conf" data-name="کانفیگ 2"
          data-location="Location2" data-status="inactive">کانفیگ 2</option>
        <option value="config3" data-link="https://example.com/config3.conf" data-name="کانفیگ 3"
          data-location="Location3" data-status="active">کانفیگ 3</option>
      </select>
      <button id="wg-config-download">دانلود</button>
      <div id="wg-config-details" style="margin-top:10px;"></div>
    </div>
  </div>

  <!-- المان Toast برای نمایش پیام‌ها -->
  <div id="toast" class="toast"></div>

  <!-- اسکریپت مربوط به دانلود کانفیگ وایرگارد و انیمیشن‌های تغییر صفحه -->
  <script>
    // دانلود کانفیگ وایرگارد
    document.getElementById('wg-config-download').addEventListener('click', function () {
      const select = document.getElementById('wg-config-select');
      const selectedOption = select.options[select.selectedIndex];
      const downloadLink = selectedOption.getAttribute('data-link');
      if (downloadLink) {
        window.open(downloadLink, '_blank');
      } else {
        alert('لطفاً یک کانفیگ انتخاب کنید.');
      }
    });

    // نمایش مشخصات کانفیگ هنگام انتخاب
    document.getElementById('wg-config-select').addEventListener('change', function () {
      const selectedOption = this.options[this.selectedIndex];
      const detailsDiv = document.getElementById('wg-config-details');
      if (!selectedOption.value) {
        detailsDiv.innerHTML = '';
        return;
      }
      const configName = selectedOption.getAttribute('data-name') || 'نام مشخص نیست';
      const configLocation = selectedOption.getAttribute('data-location') || 'لوکیشن مشخص نیست';
      const configStatus = selectedOption.getAttribute('data-status') || 'inactive';
      const statusText = (configStatus.toLowerCase() === 'active') ? 'فعال' : 'غیرفعال';
      detailsDiv.innerHTML = `
        <p><strong>نام کانفیگ:</strong> ${configName}</p>
        <p><strong>لوکیشن:</strong> ${configLocation}</p>
        <p><strong>وضعیت:</strong> ${statusText}</p>
      `;
    });

    // انیمیشن تغییر صفحه هنگام ورود به سیستم
    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const loginPage = document.getElementById('login-page');
      const mainPage = document.getElementById('main-page');
      loginPage.classList.add('fade-out');
      setTimeout(() => {
        loginPage.style.display = 'none';
        mainPage.style.display = 'block';
        mainPage.classList.add('fade-in');
        setTimeout(() => {
          mainPage.classList.remove('fade-in');
        }, 500);
      }, 500);
    });

    // انیمیشن تغییر ظاهر صفحه هنگام کلیک روی دکمه "ظاهر جدید"
    document.getElementById('new-appearance-btn').addEventListener('click', function() {
      const mainPage = document.getElementById('main-page');
      mainPage.classList.add('fade-out');
      setTimeout(() => {
        // اینجا می‌توانید تغییرات اضافی ظاهری یا بارگذاری المان‌های جدید را انجام دهید
        mainPage.classList.remove('fade-out');
        mainPage.classList.add('fade-in');
        setTimeout(() => {
          mainPage.classList.remove('fade-in');
        }, 500);
      }, 500);
    });
  </script>

  <!-- ارجاع به فایل جاوااسکریپت (index.js) -->
  <script type="module" src="index.js"></script>
</body>
</html>
